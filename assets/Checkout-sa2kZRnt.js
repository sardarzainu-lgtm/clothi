import{C as G,u as J,j as e,a as U}from"./index-CtpoxrkX.js";import{b as Q,r as t}from"./react-vendor-B6jIvKX7.js";import"./icons-5ai6tmcJ.js";const Y=()=>{const i=Q(),{cartItems:l,shippingAddress:n,saveShippingAddress:T,paymentMethod:M,savePaymentMethod:K,clearCart:w}=t.useContext(G),{showToast:b}=J(),d=JSON.parse(localStorage.getItem("userInfo")),[h,A]=t.useState(n.firstName||""),[m,I]=t.useState(n.lastName||""),[u,B]=t.useState(n.address||""),[p,E]=t.useState(n.country||"Pakistan"),[x,D]=t.useState(n.state||""),[j,R]=t.useState(n.city||""),[g,z]=t.useState(n.postalCode||""),[f,q]=t.useState(n.phoneNumber||""),[r,y]=t.useState(M||"EasyPaisa"),[C,H]=t.useState(""),[N,L]=t.useState([]),S=["Abbottabad","Ahmadpur East","Attock","Bahawalpur","Bannu","Bhakkar","Bhalwal","Burewala","Chakdara","Chakwal","Chaman","Chiniot","Chishtian","Dadu","Daharki","Daska","Dera Ghazi Khan","Dera Ismail Khan","Faisalabad","Ghotki","Gojra","Gujranwala","Gujrat","Hafizabad","Hangu","Hasilpur","Hassan Abdal","Hyderabad","Islamabad","Jacobabad","Jaranwala","Jhang","Jhelum","Kamalia","Kamoke","Kandhkot","Karachi","Karak","Kasur","Kashmore","Khanewal","Khanpur","Khairpur","Kharian","Khuzdar","Kohat","Kot Addu","Kot Diji","Kotri","Lahore","Lakki Marwat","Larkana","Lodhran","Mandi Bahauddin","Mardan","Mian Channu","Mianwali","Mingaora","Mirpur Khas","Mirpur Mathelo","Mithi","Muzaffargarh","Muzaffarabad","Multan","Muridke","Narowal","Naushahro Feroze","Nawabshah","Nowshera","Okara","Pakpattan","Peshawar","Qambar Shahdadkot","Quetta","Rahim Yar Khan","Rawalpindi","Rohri","Sahiwal","Sanghar","Sargodha","Shahdadkot","Shahdadpur","Shahkot","Sheikhupura","Shikarpur","Sialkot","Sukkur","Swabi","Tando Adam","Tando Allahyar","Tando Muhammad Khan","Tank","Thatta","Tharparkar","Umerkot","Vihari","Zafarwal"];t.useEffect(()=>{d||i("/login?redirect=checkout"),l.length===0&&i("/cart")},[d,l,i]);const v=a=>(Math.round(a*100)/100).toFixed(2),o=v(l.reduce((a,s)=>a+s.price*s.qty,0)),k=v(o>100?0:10),P=v(Number((.15*o).toFixed(2))),c=(Number(o)+Number(k)+Number(P)).toFixed(2),O=async a=>{a.preventDefault(),T({firstName:h,lastName:m,address:u,country:p,state:x,city:j,postalCode:g,phoneNumber:f}),K(r);try{const s={headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.token}`}},F={orderItems:l,shippingAddress:{firstName:h,lastName:m,address:u,country:p,state:x,city:j,postalCode:g,phoneNumber:f},paymentMethod:r,itemsPrice:o,shippingPrice:k,taxPrice:P,totalPrice:c},{data:Z}=await U.post("/api/orders",F,s);b("Order Placed Successfully!"),w(),i("/")}catch(s){b(s.response&&s.response.data.message?s.response.data.message:s.message)}};return e.jsxs("div",{className:"container checkout-container",children:[e.jsx("h1",{className:"checkout-title",children:"Checkout"}),e.jsxs("div",{className:"checkout-layout",children:[e.jsxs("div",{className:"checkout-form-section",children:[e.jsx("h2",{className:"checkout-section-title",children:"Shipping Address"}),e.jsxs("form",{id:"checkout-form",onSubmit:O,children:[e.jsxs("div",{className:"checkout-form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["First Name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter first name",value:h,required:!0,onChange:a=>A(a.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Last Name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter last name",value:m,required:!0,onChange:a=>I(a.target.value)})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Street Address ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter street address",value:u,required:!0,onChange:a=>B(a.target.value)})]}),e.jsxs("div",{className:"checkout-form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Country ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{className:"form-control",value:p,required:!0,onChange:a=>E(a.target.value),children:[e.jsx("option",{value:"Pakistan",children:"Pakistan"}),e.jsx("option",{value:"India",children:"India"}),e.jsx("option",{value:"USA",children:"USA"}),e.jsx("option",{value:"UK",children:"UK"}),e.jsx("option",{value:"Canada",children:"Canada"}),e.jsx("option",{value:"Australia",children:"Australia"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"State/Province"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter state/province",value:x,onChange:a=>D(a.target.value)})]})]}),e.jsxs("div",{className:"checkout-form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"City"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"text",className:"form-control",list:"pakistani-cities",placeholder:"Select or enter city",value:j,onChange:a=>{const s=a.target.value;R(s),s&&!S.includes(s)&&!N.includes(s)&&L([...N,s])}}),e.jsxs("datalist",{id:"pakistani-cities",children:[S.map((a,s)=>e.jsx("option",{value:a},s)),N.map((a,s)=>e.jsx("option",{value:a},`custom-${s}`))]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Zip/Postal Code"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter zip/postal code",value:g,onChange:a=>z(a.target.value)})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Phone Number ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{type:"tel",className:"form-control",placeholder:"Enter phone number",value:f,required:!0,onChange:a=>q(a.target.value)})]}),e.jsx("h2",{className:"checkout-section-title",style:{marginTop:"2rem"},children:"Payment Method"}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"EasyPaisa",checked:r==="EasyPaisa",onChange:a=>y(a.target.value)}),"EasyPaisa"]}),r==="EasyPaisa"&&e.jsxs("div",{className:"payment-method-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Account Title:"})," CLOTHI Store"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Account Number:"})," 0300-1234567"]}),e.jsxs("p",{style:{marginTop:"5px",color:"#666"},children:["Please send ",e.jsxs("strong",{children:["Rs ",c]})," to this number."]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"BankTransfer",checked:r==="BankTransfer",onChange:a=>y(a.target.value)}),"Bank Transfer"]}),r==="BankTransfer"&&e.jsxs("div",{className:"payment-method-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Bank Name:"})," HBL"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Account Number:"})," 1234-5678-9012-3456"]}),e.jsxs("p",{style:{marginTop:"5px",color:"#666"},children:["Please transfer ",e.jsxs("strong",{children:["Rs ",c]})," to this account."]})]})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"COD",checked:r==="COD",onChange:a=>y(a.target.value)}),"Cash on Delivery"]})}),(r==="EasyPaisa"||r==="BankTransfer")&&e.jsxs("div",{className:"form-group",style:{marginTop:"1.5rem"},children:[e.jsx("label",{className:"form-label",children:"Transaction ID / Reference No."}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Trx ID",required:!0,value:C,onChange:a=>H(a.target.value)})]})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"checkout-order-summary",children:[e.jsx("h2",{className:"checkout-section-title",style:{marginBottom:"1.5rem"},children:"Order Summary"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsx("span",{children:"Items"}),e.jsxs("span",{children:["Rs ",o]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsx("span",{children:"Shipping"}),e.jsxs("span",{children:["Rs ",k]})]}),e.jsx("div",{style:{borderTop:"1px solid #eee",margin:"1rem 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"bold",fontSize:"1.2rem"},children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["Rs ",c]})]}),e.jsx("div",{className:"checkout-items-list",children:l.map((a,s)=>e.jsxs("div",{className:"checkout-item",children:[e.jsx("img",{src:a.image,alt:a.name,className:"checkout-item-image"}),e.jsx("div",{className:"checkout-item-name",children:a.name}),e.jsxs("div",{className:"checkout-item-details",children:[a.qty," x Rs ",a.price]})]},s))}),e.jsx("button",{type:"submit",form:"checkout-form",className:"btn btn-primary btn-block",style:{marginTop:"1.5rem"},children:"Place Order"})]})})]})]})};export{Y as default};
