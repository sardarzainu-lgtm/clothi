import{C as w,W as D,u as S,j as e,r as T,E as C,P as L,a as A}from"./index-CtpoxrkX.js";import{r as d,R as h}from"./react-vendor-B6jIvKX7.js";import"./icons-5ai6tmcJ.js";const W=()=>{const[l,x]=d.useState([]),[p,o]=d.useState(!0),{addToCart:f}=h.useContext(w),{addToWishlist:j,removeFromWishlist:g,isInWishlist:m}=h.useContext(D),{showToast:c}=S();d.useEffect(()=>{(async()=>{try{const{data:a}=await A.get("/api/dailydeals");x(a),o(!1)}catch(a){console.error("Error fetching daily deals:",a),c("Error loading daily deals","error"),o(!1)}})()},[c]);const v=s=>{m(s._id)?(g(s._id),c("Removed from wishlist","success")):(j(s),c("Added to wishlist","success"))},u=s=>{const a=new Date().getTime(),t=new Date(s).getTime()-a;if(t<=0)return{hours:0,minutes:0,seconds:0,expired:!0};const n=Math.floor(t%(1e3*60*60*24)/(1e3*60*60)),r=Math.floor(t%(1e3*60*60)/(1e3*60)),y=Math.floor(t%(1e3*60)/1e3);return{hours:n,minutes:r,seconds:y,expired:!1}},N=({endTime:s})=>{const[a,i]=d.useState(u(s));return d.useEffect(()=>{const t=setInterval(()=>{const n=u(s);i(n),n.expired&&clearInterval(t)},1e3);return()=>clearInterval(t)},[s]),a.expired?e.jsx("div",{className:"daily-deal-expired",children:e.jsx("span",{children:"Deal Expired"})}):e.jsxs("div",{className:"daily-deal-countdown",children:[e.jsxs("div",{className:"countdown-item",children:[e.jsx("div",{className:"countdown-value",children:String(a.hours).padStart(2,"0")}),e.jsx("div",{className:"countdown-label",children:"Hours"})]}),e.jsx("div",{className:"countdown-separator",children:":"}),e.jsxs("div",{className:"countdown-item",children:[e.jsx("div",{className:"countdown-value",children:String(a.minutes).padStart(2,"0")}),e.jsx("div",{className:"countdown-label",children:"Minutes"})]}),e.jsx("div",{className:"countdown-separator",children:":"}),e.jsxs("div",{className:"countdown-item",children:[e.jsx("div",{className:"countdown-value",children:String(a.seconds).padStart(2,"0")}),e.jsx("div",{className:"countdown-label",children:"Seconds"})]})]})};return p?e.jsx("div",{className:"container",style:{marginTop:"2rem",textAlign:"center",padding:"4rem 2rem"},children:e.jsx("p",{children:"Loading daily deals..."})}):e.jsxs("div",{className:"container fade-in",style:{marginTop:"var(--spacing-2xl)",marginBottom:"var(--spacing-3xl)"},children:[e.jsxs("div",{className:"page-header mb-2xl",children:[e.jsxs("h1",{className:"page-title gradient-text",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[e.jsx(T,{className:"daily-deals-icon"}),"Daily Deals"]}),e.jsx("p",{className:"page-subtitle",children:"Limited time offers - Don't miss out!"})]}),l.length===0?e.jsx(C,{type:"search",title:"No Daily Deals Available",message:"Check back soon for amazing deals!",actionLabel:"Continue Shopping",actionLink:"/shop"}):e.jsx("div",{className:"daily-deals-container",children:l.map(s=>e.jsxs("div",{className:"daily-deal-card",children:[e.jsxs("div",{className:"daily-deal-header",children:[e.jsx("h2",{className:"daily-deal-title",children:"DAILY DEAL ENDS IN"}),e.jsx(N,{endTime:s.endTime}),e.jsx("p",{className:"daily-deal-urgency",children:"Hurry! Limited Stock Available"})]}),s.product&&(()=>{const a=s.product.price,i=s.discountPercentage||0,t=a*(1-i/100),n={...s.product,price:t,originalPrice:a,discountPercentage:i,isOnSale:i>0};return e.jsx("div",{className:"daily-deal-product",children:e.jsx(L,{product:n,onAddToCart:r=>{f(r,1),c("Added to cart","success")},onAddToWishlist:v,isInWishlist:m(s.product._id),showQuickActions:!0})})})()]},s._id))})]})};export{W as default};
