import{u as y,a as l,j as r,t as b,v as f,m as j,l as w,s as N}from"./index-CtpoxrkX.js";import{r as d,L as k}from"./react-vendor-B6jIvKX7.js";import"./icons-5ai6tmcJ.js";const I=()=>{const[p,m]=d.useState([]),[i,c]=d.useState({show:!1,productId:null,productName:null}),{showToast:s}=y();d.useEffect(()=>{u()},[]);const u=async()=>{var e,n,o;try{const{data:t}=await l.get("/api/products");console.log("Admin ProductList: Products fetched:",t.length,"products"),m(t),t.length===0&&s("No products found. Create your first product!","info")}catch(t){console.error("Admin ProductList: Error fetching products:",t),console.error("Error details:",((e=t.response)==null?void 0:e.data)||t.message),s(((o=(n=t.response)==null?void 0:n.data)==null?void 0:o.message)||t.message||"Error fetching products. Make sure the backend server is running.","error")}},h=(e,n)=>{c({show:!0,productId:e,productName:n})},a=()=>{c({show:!1,productId:null,productName:null})},x=async()=>{const{productId:e}=i;if(e)try{const o={headers:{Authorization:`Bearer ${JSON.parse(localStorage.getItem("userInfo")).token}`}};await l.delete(`/api/products/${e}`,o),s("Product deleted successfully!","success"),a(),u()}catch{s("Error deleting product","error"),a()}},g=async()=>{try{const n={headers:{Authorization:`Bearer ${JSON.parse(localStorage.getItem("userInfo")).token}`}},{data:o}=await l.post("/api/products",{},n);window.location.href=`/admin/product/${o._id}/edit`}catch(e){s("Error creating product:",e)}};return r.jsxs("div",{className:"container",style:{marginTop:"2rem"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<480?"column":"row",justifyContent:"space-between",alignItems:window.innerWidth<480?"flex-start":"center",marginBottom:"2rem",gap:"1rem"},children:[r.jsx("h1",{style:{fontSize:"clamp(1.5rem, 5vw, 2rem)"},children:"Products"}),r.jsxs("button",{className:"btn btn-primary",onClick:g,style:{whiteSpace:"nowrap"},children:[r.jsx(b,{})," Create Product"]})]}),r.jsx("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:r.jsxs("table",{style:{width:"100%",minWidth:"600px",borderCollapse:"collapse",fontSize:window.innerWidth<768?"0.875rem":"1rem"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{borderBottom:"2px solid #eee",textAlign:"left"},children:[r.jsx("th",{className:"py-1",style:{display:window.innerWidth<768?"none":"table-cell"},children:"ID"}),r.jsx("th",{className:"py-1",children:"NAME"}),r.jsx("th",{className:"py-1",children:"PRICE"}),r.jsx("th",{className:"py-1",children:"CATEGORY"}),r.jsx("th",{className:"py-1",style:{display:window.innerWidth<768?"none":"table-cell"},children:"BRAND"}),r.jsx("th",{className:"py-1",children:"ACTIONS"})]})}),r.jsx("tbody",{children:p.map(e=>r.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[r.jsx("td",{className:"py-1",style:{display:window.innerWidth<768?"none":"table-cell"},children:e._id}),r.jsx("td",{className:"py-1",children:e.name}),r.jsxs("td",{className:"py-1",children:["Rs ",e.price]}),r.jsx("td",{className:"py-1",children:e.category}),r.jsx("td",{className:"py-1",style:{display:window.innerWidth<768?"none":"table-cell"},children:e.brand}),r.jsxs("td",{className:"py-1",style:{whiteSpace:"nowrap"},children:[r.jsx(k,{to:`/admin/product/${e._id}/edit`,className:"btn btn-outline",style:{padding:"5px 10px",marginRight:"5px",fontSize:"0.875rem"},children:r.jsx(f,{})}),r.jsx("button",{className:"btn btn-outline",onClick:()=>h(e._id,e.name),style:{padding:"5px 10px",color:"red",borderColor:"red",fontSize:"0.875rem"},children:r.jsx(j,{})})]})]},e._id))})]})}),i.show&&r.jsx("div",{className:"premium-delete-modal-overlay",onClick:a,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.75)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"1rem",animation:"fadeIn 0.3s ease"},children:r.jsxs("div",{className:"premium-delete-modal",onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"20px",padding:"2rem",maxWidth:"500px",width:"100%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 0, 0, 0.1)",position:"relative",animation:"zoomIn 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(210, 168, 65, 0.2)"},children:[r.jsx("button",{onClick:a,style:{position:"absolute",top:"1rem",right:"1rem",background:"transparent",border:"none",fontSize:"1.5rem",color:"#666",cursor:"pointer",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="#f3f4f6",e.currentTarget.style.color="#000"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="#666"},"aria-label":"Close",children:r.jsx(w,{})}),r.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:r.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.1) 100%)",display:"flex",alignItems:"center",justifyContent:"center",border:"3px solid rgba(239, 68, 68, 0.2)"},children:r.jsx(N,{style:{fontSize:"2.5rem",color:"#ef4444"}})})}),r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700",textAlign:"center",marginBottom:"1rem",color:"#1f2937",letterSpacing:"-0.01em"},children:"Delete Product?"}),r.jsxs("p",{style:{fontSize:"1rem",color:"#6b7280",textAlign:"center",lineHeight:"1.6",marginBottom:"2rem",padding:"0 1rem"},children:["Are you sure you want to delete ",r.jsxs("strong",{style:{color:"#1f2937"},children:['"',i.productName,'"']}),"? This action cannot be undone and will permanently remove the product from your store."]}),r.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[r.jsx("button",{onClick:a,className:"premium-modal-cancel-btn",style:{padding:"0.75rem 2rem",borderRadius:"12px",border:"2px solid #e5e7eb",background:"white",color:"#374151",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",flex:1,maxWidth:"150px"},onMouseEnter:e=>{e.currentTarget.style.background="#f9fafb",e.currentTarget.style.borderColor="#d1d5db",e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.background="white",e.currentTarget.style.borderColor="#e5e7eb",e.currentTarget.style.transform="translateY(0)"},children:"Cancel"}),r.jsx("button",{onClick:x,className:"premium-modal-delete-btn",style:{padding:"0.75rem 2rem",borderRadius:"12px",border:"none",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)",flex:1,maxWidth:"150px"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)",e.currentTarget.style.boxShadow="0 6px 20px rgba(239, 68, 68, 0.4)",e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",e.currentTarget.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.3)",e.currentTarget.style.transform="translateY(0)"},children:"Delete"})]})]})})]})};export{I as default};
