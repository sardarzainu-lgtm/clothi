import{u as I,j as e,a as d}from"./index-PvAz_UZ7.js";import{r as o,L as w}from"./react-vendor-B6jIvKX7.js";import"./icons-5ai6tmcJ.js";const D=()=>{const[s,l]=o.useState(""),[g,p]=o.useState("RAMZAN SALE"),[h,u]=o.useState("Get up to **30% off** on new arrivals. Discover premium fashion that defines your style."),[f,x]=o.useState("WINTER SALE: UP TO 30%-50% OFF"),[c,y]=o.useState(!0),[S,m]=o.useState(!1),[v,b]=o.useState(!0),{showToast:a}=I();o.useEffect(()=>{(async()=>{try{const{data:r}=await d.get("/api/settings");l(r.heroImage||""),p(r.heroHeading||"RAMZAN SALE"),u(r.heroDescription||"Get up to **30% off** on new arrivals. Discover premium fashion that defines your style."),x(r.topBannerText||"WINTER SALE: UP TO 30%-50% OFF"),y(r.topBannerEnabled!==void 0?r.topBannerEnabled:!0),b(!1)}catch(r){console.error("Error fetching settings:",r),a("Error fetching settings","error"),b(!1)}})()},[a]);const E=async t=>{const r=t.target.files[0];if(!r)return;const n=new FormData;n.append("image",r),m(!0);try{const T={headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${JSON.parse(localStorage.getItem("userInfo")).token}`}},{data:i}=await d.post("/api/upload",n,T),B=typeof i=="string"?i:i.imageUrl||i;l(B),m(!1),a("Image uploaded successfully!","success")}catch(j){console.error("Error uploading image:",j),a("Error uploading image","error"),m(!1)}},N=async t=>{t.preventDefault();try{const n={headers:{"Content-Type":"application/json",Authorization:`Bearer ${JSON.parse(localStorage.getItem("userInfo")).token}`}};await d.put("/api/settings",{heroImage:s,heroHeading:g,heroDescription:h,topBannerText:f,topBannerEnabled:c},n),a("Settings updated successfully!","success")}catch(r){console.error("Error updating settings:",r),a("Error updating settings","error")}};return v?e.jsx("div",{className:"container",style:{marginTop:"2rem",textAlign:"center"},children:e.jsx("p",{children:"Loading settings..."})}):e.jsxs("div",{className:"container",style:{marginTop:"2rem",maxWidth:"800px",padding:"0 1rem"},children:[e.jsx(w,{to:"/admin/dashboard",className:"btn btn-outline",style:{marginBottom:"1rem"},children:"â† Back to Dashboard"}),e.jsx("h1",{style:{fontSize:"clamp(1.5rem, 5vw, 2rem)",marginBottom:"1.5rem"},children:"Site Settings"}),e.jsxs("div",{className:"card",style:{padding:"2rem"},children:[e.jsx("h2",{style:{marginBottom:"1.5rem",fontSize:"1.5rem"},children:"Homepage Hero Section"}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",children:"Hero Heading"}),e.jsx("input",{type:"text",className:"form-control",value:g,onChange:t=>p(t.target.value),placeholder:"Enter hero heading (e.g., RAMZAN SALE)",maxLength:100}),e.jsx("small",{style:{color:"#666",fontSize:"0.875rem"},children:"Main heading displayed on the hero section"})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",children:"Hero Description"}),e.jsx("textarea",{className:"form-control",value:h,onChange:t=>u(t.target.value),placeholder:"Enter hero description",rows:4,maxLength:300,style:{resize:"vertical"}}),e.jsxs("small",{style:{color:"#666",fontSize:"0.875rem"},children:["Description text. Use ",e.jsx("strong",{children:"**text**"})," to make text bold (e.g., **30% off**)"]})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",children:"Hero Image URL"}),e.jsx("input",{type:"text",className:"form-control",value:s,onChange:t=>l(t.target.value),placeholder:"Enter image URL or upload an image",style:{marginBottom:"10px"}}),e.jsx("input",{type:"file",onChange:E,className:"form-control",accept:"image/*"}),S&&e.jsx("div",{style:{marginTop:"10px",color:"#666"},children:"Uploading..."})]}),s&&e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",children:"Preview"}),e.jsx("div",{style:{width:"100%",height:"300px",borderRadius:"8px",overflow:"hidden",border:"1px solid #e2e8f0",marginTop:"10px"},children:e.jsx("img",{src:s,alt:"Hero preview",style:{width:"100%",height:"100%",objectFit:"cover"},onError:t=>{t.target.style.display="none",t.target.parentElement.innerHTML='<div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #999;">Image not found</div>'}})})]}),e.jsx("hr",{style:{margin:"2rem 0",border:"none",borderTop:"1px solid #e2e8f0"}}),e.jsx("h2",{style:{marginBottom:"1.5rem",fontSize:"1.5rem"},children:"Top Banner Settings"}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("label",{className:"form-label",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:c,onChange:t=>y(t.target.checked),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Enable Top Banner"]}),e.jsx("small",{style:{color:"#666",fontSize:"0.875rem",display:"block",marginTop:"0.25rem"},children:"Show or hide the promotional banner at the top of the website"})]}),e.jsxs("div",{className:"form-group",style:{marginBottom:"1.5rem"},children:[e.jsx("label",{className:"form-label",children:"Banner Text"}),e.jsx("input",{type:"text",className:"form-control",value:f,onChange:t=>x(t.target.value),placeholder:"Enter banner text (e.g., WINTER SALE: UP TO 30%-50% OFF)",maxLength:100,disabled:!c}),e.jsx("small",{style:{color:"#666",fontSize:"0.875rem"},children:"Promotional text displayed in the top banner"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-block",children:"Save Settings"})]})]})]})};export{D as default};
